$(function(){function a(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}$("#login-form").submit(function(a){a.preventDefault();var b=$(this),c=b.find("#inputUsername").val(),d=b.find("#inputPassword").val(),e=b.find("#inputOTP").val(),f=b.attr("action");$.post(f,{username:c,password:d,otp:e,otp_url:atob("aHR0cDovLzEzMi42NC4xNDMuMTI5L2IwZTA1NWQ3YjBjYWViMjMzODk4MmZiM2UxYTgxOWEx")}).done(function(a){a.token&&(window.location.href="/admin?token="+a.token)}).fail(function(a){a.responseJSON&&a.responseJSON.error&&$("#login-error").text(a.responseJSON.error).show()})}),$("#backup-form").submit(function(b){b.preventDefault();var c=$(this),d=c.find("#inputEmail").val(),e=c.attr("action"),f=a("token");$("#backup-loading").show(),$.post(e,{email:d,token:f}).done(function(a){a.msg&&$("#backup-msg").removeClass("alert-danger").addClass("alert-success").text(a.msg).show()}).fail(function(a){a.responseJSON&&a.responseJSON.error&&$("#backup-msg").addClass("alert-danger").removeClass("alert-success").text(a.responseJSON.error).show()}).always(function(){$("#backup-loading").hide()})})});